# Серверная часть мессенджера

## Репозиторий клиентской части
Быстрый переход к [клиентской части](https://github.com/Firegreat78/msg_client):

## Особенности функционирования сервера
- Сервер работает в многопоточном режиме, создавая отдельный thread для каждого клиентского соединения;
- Данные мессенджера хранятся в базе данных PostgreSQL;
- Присутствует автоматическая очистка закрытых соединений в главном цикле основного потока;
- Присутствует возможность авторизации в один и тот же аккаунт через разные клиенты;
- Автоматическая установка статуса "не в сети" при logout'е последнего пользователя из аккаунта.
Реализуется следующим образом: при каждом успешном login'е происходит increment счётчика успешных login'ов. Decrement счётчика происходит в одном из двух случаев:
1. Клиент вышел из аккаунта;
2. Socket клиента аварийно отсоединился во время того, как клиент был авторизован в аккаунт.

Когда значение счётчика доходит до нуля, устанавливается режим "не в сети".

## Зависимости:
- [libpqxx](https://pqxx.org/development/libpqxx/) - для соединения с базой данных PostgreSQL;
- [nlohmann::json](https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp) - header-only парсер json'ов.
